<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Online Shopping Lab</title>
    <style>
    </style>
  </head>
  <body>

  <p></p>

  <script>
// Set up by the lab
var cart = [];

// Set up by the lab
function getCart() {
 return cart;
}
// Set up by the lab
function setCart(c) {
  cart = c;
  return cart;
}

//Adds new food item to cart array with random price between 1 and 100
function addToCart(item) {
cart.push({
  itemName: item,
  itemPrice: Math.floor((Math.random() * 100 + 1))
}
)
console.log(cart)
   return `${item} has been added to your cart.`
}

// Allows shopper to view cart contents
function viewCart() {
  var viewCartArray = []
  cart.forEach(function(element) {
    viewCartArray.push(" " + element.itemName + " at $" + element.itemPrice)
  })
  if (cart.length === 0) {
  return "Your shopping cart is empty."
  } else if (cart.length === 1) {
    return `In your cart, you have${viewCartArray}`
  } else {
        var lastElement = viewCartArray.pop()
      return `In your cart, you have${viewCartArray}and${lastElement}`
}
}

// Sums up the total cost of food items in cart
function total() {
  // Creates an empty array
  var totalArray = []
  finalSum = 0
  // Loops over each element of the cart array
  cart.forEach(function(element) {
    // Pushes the price of each food item to the totalArray
    totalArray.push(element.itemPrice)})
    // Loops over each price and adds to finalSum
    totalArray.forEach(function(prices) {
      finalSum = finalSum + prices
    }
    )
    return finalSum
  }

function removeFromCart(item) {
let n = ""
var i;
for (i = 0; i < cart.length; i++) {
  if (cart[i].itemName === item) {
    n  = cart[i].itemName;
    break;
  }
}
if (n === item) {
  cart.splice(i, 1);
  return cart
} else {
  return "That item is not in your cart."
}
}


function placeOrder(cardNumber) {
 // if no argument received, the function should console.log "Sorry we don't have a credit card on file for you"
 if (arguments.length === 0) {
  console.log("Sorry, we don\'t have a credit card on file for you.")
 // else if a cc # is recieved, the function should empty the cart array
} else {
  // empty the cart array
  const cartTotal = total()
  cart.length = 0
  // then return the total cost + "which will be charged to" + the cardNumber
  return `Your total cost is $${total()}, which will be charged to ${cardNumber}.`
}
}

addToCart("bananas")
addToCart("eggs")
addToCart("pears")
addToCart("mangoes")
addToCart("pancake batter")
viewCart()
total()
removeFromCart("eggs")
removeFromCart("apples")
removeFromCart("bananas")
removeFromCart("hearts")
placeOrder()
placeOrder(123456)

    </script>

  </body>
</html>